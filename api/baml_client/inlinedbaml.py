# ----------------------------------------------------------------------------
#
#  Welcome to Baml! To use this generated code, please run the following:
#
#  $ pip install baml
#
# ----------------------------------------------------------------------------

# This file was generated by BAML: please do not edit it. Instead, edit the
# BAML files and re-generate this code using: baml-cli generate
# baml-cli is available with the baml package.

_file_map = {

    "AdaptFactorWeights.baml": "// AdaptFactorWeights.baml\n// Classifies business cycle phase and returns factor group weight multipliers.\n\nenum BusinessCyclePhase {\n  EARLY_EXPANSION\n  MID_EXPANSION\n  LATE_EXPANSION\n  RECESSION\n}\n\nclass FactorWeightAdaptation {\n  phase BusinessCyclePhase @description(\"Detected business cycle phase.\")\n  weights map<string, float> @description(\"Factor group -> weight multiplier. Multipliers sum to the number of factor groups.\")\n  rationale string @description(\"Brief explanation of the phase classification and weight adjustments.\")\n}\n\nfunction AdaptFactorWeights(macro_indicators: string, factor_groups: string[]) -> FactorWeightAdaptation {\n  client CustomSonnet45\n  prompt #\"\n    You are a quantitative macro strategist. Based on the macro indicators provided,\n    classify the current business cycle phase and recommend factor weight multipliers.\n\n    Business cycle phases and typical factor tilts:\n    - EARLY_EXPANSION: favour momentum (MTUM), quality (QUAL); underweight value (VLUE)\n    - MID_EXPANSION: balanced; slight overweight momentum and low-volatility (USMV)\n    - LATE_EXPANSION: favour low-volatility (USMV), dividend (DVY); underweight momentum\n    - RECESSION: favour value (VLUE), quality (QUAL); underweight momentum (MTUM)\n\n    Important constraint: the multipliers MUST sum exactly to {{ factor_groups | length }}.\n    Each multiplier must be positive (minimum 0.1).\n\n    Macro indicators:\n    {{ macro_indicators }}\n\n    Factor groups to weight:\n    {{ factor_groups }}\n\n    {{ ctx.output_format }}\n  \"#\n}\n\ntest AdaptFactorWeightsExpansion {\n  functions [AdaptFactorWeights]\n  args {\n    macro_indicators \"ISM Manufacturing PMI: 55.3. Unemployment: 4.2%. 10Y-2Y spread: +120bps. Leading indicators index: rising.\"\n    factor_groups [\"momentum\", \"value\", \"quality\", \"low_volatility\"]\n  }\n}\n\ntest AdaptFactorWeightsRecession {\n  functions [AdaptFactorWeights]\n  args {\n    macro_indicators \"ISM PMI: 47.1. Unemployment: 6.8%. Yield curve inverted: -50bps. Leading indicators: declining for 8 months.\"\n    factor_groups [\"momentum\", \"value\", \"quality\", \"low_volatility\"]\n  }\n}\n",
    "CalibrateDelta.baml": "// CalibrateDelta.baml\n// Calibrates the Black-Litterman risk aversion scalar (delta) from macro regime text.\n\nclass DeltaCalibration {\n  delta float @description(\"Risk aversion scalar in [1.0, 10.0]. Higher = more risk-averse prior.\")\n  rationale string @description(\"Brief explanation of why this delta was chosen.\")\n}\n\nfunction CalibrateDelta(macro_text: string) -> DeltaCalibration {\n  client CustomSonnet45\n  prompt #\"\n    You are a quantitative portfolio strategist. Your task is to calibrate the\n    Black-Litterman risk aversion scalar (delta) based on a macro regime description.\n\n    Guidelines:\n    - delta = 1.0–3.0: benign / expansionary environment (equities favoured, low uncertainty)\n    - delta = 3.0–6.0: neutral / mixed signals (balanced positioning)\n    - delta = 6.0–10.0: recessionary / high-uncertainty environment (defensive positioning)\n\n    Macro context:\n    {{ macro_text }}\n\n    Return a JSON object with:\n    - delta: float clamped to [1.0, 10.0]\n    - rationale: one-sentence explanation\n\n    {{ ctx.output_format }}\n  \"#\n}\n\ntest CalibrateDeltaExpansion {\n  functions [CalibrateDelta]\n  args {\n    macro_text \"GDP growth accelerated to 3.2% YoY. The Fed held rates steady signalling a soft landing. Credit spreads are tight and equity volatility (VIX) is at 12.\"\n  }\n}\n\ntest CalibrateDeltaRecession {\n  functions [CalibrateDelta]\n  args {\n    macro_text \"The Fed raised rates by 75bps for the third consecutive meeting. GDP contracted for two quarters. Credit spreads widened to 500bps and unemployment rose to 6.5%.\"\n  }\n}\n",
    "ClassifyMacroRegime.baml": "// ClassifyMacroRegime.baml\n// Classifies the current business cycle phase from macro indicators and\n// returns calibrated Black-Litterman δ (risk aversion) and τ (uncertainty scaling).\n\nclass MacroRegimeCalibration {\n  phase BusinessCyclePhase @description(\"Classified business cycle phase.\")\n  delta float @description(\"Black-Litterman risk aversion scalar. Range [1.0, 10.0]. Higher = more conservative equilibrium prior.\")\n  tau float @description(\"Black-Litterman uncertainty scaling. Range [0.001, 0.1]. Higher = more weight on views vs. equilibrium.\")\n  confidence float @description(\"Classification confidence in [0.0, 1.0].\")\n  rationale string @description(\"Brief explanation of the phase classification and parameter choices.\")\n}\n\nfunction ClassifyMacroRegime(macro_summary: string) -> MacroRegimeCalibration {\n  client CustomSonnet45\n  prompt #\"\n    You are a macro strategist calibrating Black-Litterman portfolio model parameters.\n    Classify the current business cycle phase and return appropriate δ (delta) and τ (tau).\n\n    Phase definitions and parameter guidelines:\n    - EARLY_EXPANSION: GDP recovering, unemployment falling, PMI >50 and rising, yield curve steepening.\n      → delta: 2.0–2.5, tau: 0.05 (moderate risk aversion, significant view weighting)\n    - MID_EXPANSION: Solid GDP growth, low unemployment, PMI >55, credit spreads tight.\n      → delta: 2.5–3.0, tau: 0.025 (moderate risk aversion, balanced view weighting)\n    - LATE_EXPANSION: Growth slowing, PMI plateauing/falling, yield curve flattening, inflation elevated.\n      → delta: 3.0–4.0, tau: 0.01 (elevated risk aversion, low view weighting — trust equilibrium more)\n    - RECESSION: GDP contracting, unemployment rising, PMI <50, yield curve inverted or credit spreads wide.\n      → delta: 4.0–6.0, tau: 0.05 (high risk aversion, significant view weighting — views signal turning point)\n\n    Hard constraints:\n    - delta MUST be in [1.0, 10.0]\n    - tau MUST be in [0.001, 0.1]\n    - confidence MUST be in [0.0, 1.0]\n\n    Macro indicators summary:\n    {{ macro_summary }}\n\n    {{ ctx.output_format }}\n  \"#\n}\n\ntest ClassifyMacroRegimeExpansion {\n  functions [ClassifyMacroRegime]\n  args {\n    macro_summary \"US GDP growth: +3.1% YoY. Unemployment: 3.8%. ISM PMI: 56.2 (rising). 10Y-2Y spread: +120bps (steepening). CPI: +2.3% (near target). Industrial production: +2.1%.\"\n  }\n}\n\ntest ClassifyMacroRegimeRecession {\n  functions [ClassifyMacroRegime]\n  args {\n    macro_summary \"US GDP growth: -1.2% YoY (second consecutive contraction). Unemployment: 6.5% (rising). ISM PMI: 44.1 (falling). 10Y-2Y spread: -80bps (inverted). CPI: +4.1% (elevated). Credit spreads: 450bps.\"\n  }\n}\n\ntest ClassifyMacroRegimeLateExpansion {\n  functions [ClassifyMacroRegime]\n  args {\n    macro_summary \"US GDP growth: +1.8% YoY (slowing). Unemployment: 4.2%. ISM PMI: 50.5 (plateauing). 10Y-2Y spread: +15bps (flattening). CPI: +3.8% (elevated). Leading indicators: declining for 3 months.\"\n  }\n}\n",
    "DesignStressScenarios.baml": "// DesignStressScenarios.baml\n// LLM-driven forward-looking stress scenario design for tail risk events.\n// Historical simulation only captures risks that have materialised; this\n// function generates plausible but not-yet-observed shocks that feed into\n// build_synthetic_data() for conditional stress testing.\n\nclass StressScenario {\n  name string\n    @description(\"Short label for the scenario, e.g. 'Global Recession 2026'.\")\n  description string\n    @description(\"2-4 sentence narrative explaining the macro/geopolitical trigger.\")\n  shocks map<string, float>\n    @description(\"Ticker → expected return shock over the horizon. Values in (-1, 1). E.g. {\\\"SPY\\\": -0.15, \\\"GLD\\\": 0.08}.\")\n  probability float\n    @description(\"Subjective probability that this scenario materialises. Must be in (0, 1).\")\n  horizon_days int\n    @description(\"Time horizon over which the shocks occur, in trading days.\")\n}\n\nfunction DesignStressScenarios(\n  tickers: string[],\n  macro_context: string,\n  n_scenarios: int\n) -> StressScenario[] {\n  client CustomSonnet45\n  prompt #\"\n    You are a senior risk manager designing forward-looking stress scenarios for a\n    portfolio of the following assets: {{ tickers | join(\", \") }}.\n\n    Current macro context provided by the user:\n    {{ macro_context }}\n\n    Design exactly {{ n_scenarios }} plausible but not-yet-materialised stress scenarios.\n\n    Rules:\n    1. Each scenario must be DISTINCT — cover different risk factors\n       (e.g. recession, inflation shock, geopolitical crisis, credit event, sector crash).\n    2. At least ONE scenario must represent a broad market drawdown (>10% loss on most equities).\n    3. Shock values are expected RETURNS over the scenario horizon (not multipliers).\n       Valid range: (-1.0, 1.0). Negative = loss, positive = gain.\n    4. Every ticker in the portfolio must have a shock entry.\n    5. Probability must be in (0, 1) — subjective forward probability.\n    6. horizon_days is the number of trading days over which the shock unfolds.\n    7. Safe-haven assets (GLD, TLT, SHV, BIL) should have positive or mildly negative\n       shocks in risk-off scenarios and negative shocks in inflation/stagflation scenarios.\n\n    Scenario diversity examples (do not copy, use as inspiration):\n    - Deep recession: equities -25 to -40%, rates rally, gold +15%\n    - Inflation shock / stagflation: equities -15%, gold +10%, bonds -20%\n    - Geopolitical escalation: energy +20%, tech -20%, defense +15%\n    - Credit crunch: high-yield spreads widen, financials -30%, treasuries +10%\n    - Technology sector crash: tech -40%, value sectors flat to +5%\n\n    {{ ctx.output_format }}\n  \"#\n}\n\ntest DesignStressScenariosBasic {\n  functions [DesignStressScenarios]\n  args {\n    tickers [\"SPY\", \"QQQ\", \"GLD\", \"TLT\", \"XLE\"]\n    macro_context \"US CPI running at 4.2%, Fed on hold, geopolitical tension in Middle East, AI sector valuations elevated.\"\n    n_scenarios 3\n  }\n}\n",
    "ExpertView.baml": "// ExpertView.baml\n// Parameterised expert view generation for Multi-LLM Opinion Pooling (issue #12).\n// Reuses AssetFactorData, AssetView, and ViewOutput from GenerateViews.baml.\n//\n// Each function represents a distinct analyst persona with a different\n// investment philosophy, enabling independent expert views for pooling.\n\nenum ExpertPersona {\n  VALUE_INVESTOR   @description(\"Focuses on valuation multiples: P/E, P/B, EV/EBITDA. Prefers cheap assets with earnings support.\")\n  MOMENTUM_TRADER  @description(\"Focuses on price momentum, RSI, and trend strength. Prefers assets with strong 12-1m momentum.\")\n  MACRO_ANALYST    @description(\"Focuses on macro sensitivity: revenue growth, earnings revisions, analyst consensus, and cycle positioning.\")\n}\n\nfunction GenerateExpertView(\n  assets: AssetFactorData[],\n  persona: ExpertPersona\n) -> ViewOutput {\n  client CustomSonnet45\n  prompt #\"\n    You are an investment expert generating Black-Litterman views.\n    Your persona and investment philosophy: {{ persona }}\n\n    {% if persona == ExpertPersona.VALUE_INVESTOR %}\n    VALUE INVESTOR PHILOSOPHY:\n    You focus exclusively on valuation:\n    - Seek assets with trailing_pe < sector average and low price_to_book → bullish\n    - Avoid assets where ev_to_ebitda is elevated vs. history → bearish\n    - Strong analyst upside (target_upside > 0.15) confirms value → boost confidence\n    - Ignore momentum signals; they are noise to you\n    {% elif persona == ExpertPersona.MOMENTUM_TRADER %}\n    MOMENTUM TRADER PHILOSOPHY:\n    You focus exclusively on price momentum and technical signals:\n    - High 12-1m momentum (> 0.15) with RSI < 70 → strong bullish\n    - Negative 12-1m momentum AND recent reversal (1m < -0.03) → strong bearish\n    - Distance from 52w high < -0.05 with recovering momentum → setup\n    - Ignore valuation; momentum persists regardless of P/E\n    {% elif persona == ExpertPersona.MACRO_ANALYST %}\n    MACRO ANALYST PHILOSOPHY:\n    You focus on growth, quality, and analyst signals:\n    - High revenue and earnings growth YoY → bullish fundamental backdrop\n    - Strong ROE + low debt/equity → quality buffer\n    - Analyst recommendation_mean < 2.0 with narrow dispersion → strong buy signal\n    - Earnings revisions positive (earnings_growth_yoy improving) → upgrade catalyst\n    {% endif %}\n\n    Guidelines for all personas:\n    - Only generate views where your philosophy gives a clear signal.\n    - direction = +1 (outperform) or -1 (underperform).\n    - magnitude_bps: 50-500 bps/yr. Match conviction.\n    - confidence in (0, 1). Calibrate to evidence strength.\n    - idzorek_alphas must contain an entry for every asset in views[].\n\n    Asset data:\n    {{ assets }}\n\n    {{ ctx.output_format }}\n  \"#\n}\n\n// Convenience wrappers for each persona (for simpler BAML client calls)\n\nfunction GenerateValueView(assets: AssetFactorData[]) -> ViewOutput {\n  client CustomSonnet45\n  prompt #\"\n    You are a VALUE INVESTOR generating Black-Litterman views.\n\n    Focus ONLY on valuation signals:\n    - Low trailing_pe + low price_to_book → bullish\n    - High ev_to_ebitda → bearish\n    - Positive target_upside confirms value thesis → raise confidence\n    - Ignore momentum and growth signals\n\n    direction = +1 (bullish) or -1 (bearish).\n    magnitude_bps = expected annual excess return in basis points (50–500).\n    confidence ∈ (0, 1).\n    idzorek_alphas must cover all assets in views[].\n\n    Asset data:\n    {{ assets }}\n\n    {{ ctx.output_format }}\n  \"#\n}\n\nfunction GenerateMomentumView(assets: AssetFactorData[]) -> ViewOutput {\n  client CustomOpus45\n  prompt #\"\n    You are a MOMENTUM TRADER generating Black-Litterman views.\n\n    Focus ONLY on momentum and technical signals:\n    - momentum_12_1m > 0.15 AND rsi_14 < 70 → bullish continuation\n    - momentum_12_1m < -0.10 AND momentum_1m < 0 → bearish continuation\n    - Close to 52w high (pct_from_52w_high > -0.05) → momentum confirmation\n    - Ignore valuation (P/E, P/B are noise)\n\n    direction = +1 (bullish) or -1 (bearish).\n    magnitude_bps = expected annual excess return in basis points (50–500).\n    confidence ∈ (0, 1).\n    idzorek_alphas must cover all assets in views[].\n\n    Asset data:\n    {{ assets }}\n\n    {{ ctx.output_format }}\n  \"#\n}\n\nfunction GenerateMacroView(assets: AssetFactorData[]) -> ViewOutput {\n  client CustomSonnet45\n  prompt #\"\n    You are a MACRO ANALYST generating Black-Litterman views.\n\n    Focus ONLY on growth, quality, and analyst consensus:\n    - High revenue_growth_yoy + earnings_growth_yoy → fundamental tailwind → bullish\n    - Strong return_on_equity + low debt_to_equity → quality → bullish\n    - recommendation_mean < 2.0 → analyst consensus buy → bullish\n    - recommendation_mean > 3.5 OR target_upside < 0 → analyst bearish → bearish\n    - Ignore price momentum and short-term technicals\n\n    direction = +1 (bullish) or -1 (bearish).\n    magnitude_bps = expected annual excess return in basis points (50–500).\n    confidence ∈ (0, 1).\n    idzorek_alphas must cover all assets in views[].\n\n    Asset data:\n    {{ assets }}\n\n    {{ ctx.output_format }}\n  \"#\n}\n\ntest ExpertViewValue {\n  functions [GenerateValueView]\n  args {\n    assets [\n      {\n        ticker \"AAPL\"\n        trailing_pe 28.0\n        price_to_book 45.0\n        ev_to_ebitda 21.0\n        momentum_12_1m 0.20\n        momentum_1m 0.02\n        rsi_14 60.0\n        return_on_equity 1.4\n        debt_to_equity 1.8\n        profit_margins 0.25\n        revenue_growth_yoy 0.06\n        earnings_growth_yoy 0.13\n        pct_from_52w_high -0.03\n        pct_from_52w_low 0.28\n        recommendation_mean 1.9\n        target_upside 0.18\n        analyst_count 45\n      }\n    ]\n  }\n}\n\ntest ExpertViewMomentum {\n  functions [GenerateMomentumView]\n  args {\n    assets [\n      {\n        ticker \"NVDA\"\n        trailing_pe 55.0\n        price_to_book 30.0\n        ev_to_ebitda 40.0\n        momentum_12_1m 0.85\n        momentum_1m 0.05\n        rsi_14 65.0\n        return_on_equity 0.90\n        debt_to_equity 0.40\n        profit_margins 0.55\n        revenue_growth_yoy 1.22\n        earnings_growth_yoy 2.10\n        pct_from_52w_high -0.02\n        pct_from_52w_low 0.95\n        recommendation_mean 1.5\n        target_upside 0.08\n        analyst_count 50\n      }\n    ]\n  }\n}\n",
    "GenerateViews.baml": "// GenerateViews.baml\n// LLM-driven Black-Litterman view generation from multi-factor per-asset data.\n\nclass AssetFactorData {\n  ticker string @description(\"Asset ticker symbol (e.g. 'AAPL').\")\n\n  // Valuation (z-scores or raw ratios; null if unavailable)\n  trailing_pe float? @description(\"Trailing price-to-earnings ratio.\")\n  price_to_book float? @description(\"Price-to-book ratio.\")\n  ev_to_ebitda float? @description(\"Enterprise value / EBITDA ratio.\")\n\n  // Momentum\n  momentum_12_1m float? @description(\"12-1 month price momentum (decimal, e.g. 0.18 = +18%).\")\n  momentum_1m float? @description(\"1-month price momentum (decimal). Negative = recent reversal.\")\n  rsi_14 float? @description(\"14-day RSI in [0, 100]. >70 overbought, <30 oversold.\")\n\n  // Quality\n  return_on_equity float? @description(\"Return on equity (decimal, e.g. 0.15 = 15%).\")\n  debt_to_equity float? @description(\"Debt-to-equity ratio.\")\n  profit_margins float? @description(\"Net profit margin (decimal).\")\n\n  // Growth\n  revenue_growth_yoy float? @description(\"Revenue growth year-over-year (decimal).\")\n  earnings_growth_yoy float? @description(\"Earnings growth year-over-year (decimal).\")\n\n  // Technical\n  pct_from_52w_high float? @description(\"Distance from 52-week high (negative means below high, e.g. -0.15 = 15% below).\")\n  pct_from_52w_low float? @description(\"Distance from 52-week low (positive, e.g. 0.30 = 30% above low).\")\n\n  // Analyst consensus\n  recommendation_mean float? @description(\"Mean analyst recommendation: 1=Strong Buy, 2=Buy, 3=Hold, 4=Sell, 5=Strong Sell.\")\n  target_upside float? @description(\"(target_mean_price - current_price) / current_price. Positive = upside.\")\n  analyst_count int? @description(\"Number of analysts covering the stock.\")\n}\n\nclass AssetView {\n  asset string @description(\"Ticker symbol of the asset this view is about.\")\n  direction int @description(\"View direction: +1 (bullish/outperform) or -1 (bearish/underperform).\")\n  magnitude_bps float @description(\"Expected annual excess return in basis points (e.g. 200 = 2% p.a.). Always positive; sign is captured by direction.\")\n  confidence float @description(\"View confidence in (0, 1). Higher = more certain. Maps to Idzorek alpha_k.\")\n  reasoning string @description(\"One-sentence explanation referencing the factor evidence.\")\n}\n\nclass ViewOutput {\n  views AssetView[] @description(\"List of asset views. Only include assets with sufficiently strong factor evidence.\")\n  idzorek_alphas map<string, float> @description(\"Asset ticker -> Idzorek alpha_k in (0, 1). Must include an entry for every asset in views[].\")\n  rationale string @description(\"Brief overall narrative explaining the view generation process and dominant themes.\")\n}\n\nfunction GenerateViews(assets: AssetFactorData[]) -> ViewOutput {\n  client CustomSonnet45\n  prompt #\"\n    You are a quantitative portfolio manager constructing Black-Litterman views from\n    multi-factor asset data. Your task is to generate a set of high-conviction views\n    that will be fed into the Black-Litterman prior estimation model.\n\n    Guidelines:\n    - Only generate a view for an asset when the factor evidence is sufficiently strong.\n    - direction = +1 means you expect the asset to generate above-equilibrium returns.\n    - direction = -1 means you expect below-equilibrium returns.\n    - magnitude_bps: typical range is 50-500 bps/yr. Use higher values for stronger conviction.\n    - confidence: calibrate to [0.1, 0.9]. Avoid extremes. High confidence = small Omega uncertainty.\n    - idzorek_alphas must have a key for every asset that appears in views[].\n    - The alphas in idzorek_alphas must match the confidence values in views[].\n\n    Factor interpretation:\n    - Low P/E + Low P/B → value opportunity → bullish signal\n    - High 12-1m momentum + moderate RSI → momentum continuation → bullish\n    - High ROE + low debt + high margins → quality → bullish\n    - Revenue + earnings growth above average → growth → bullish\n    - Close to 52w high but NOT overbought (RSI<70) → momentum confirmation\n    - Recommendation mean < 2.5 → analyst bullish; > 3.5 → analyst bearish\n    - Target upside > 0.15 → strong analyst bullish signal\n\n    Asset data:\n    {{ assets }}\n\n    {{ ctx.output_format }}\n  \"#\n}\n\ntest GenerateViewsMixed {\n  functions [GenerateViews]\n  args {\n    assets [\n      {\n        ticker \"AAPL\"\n        trailing_pe 28.5\n        price_to_book 45.2\n        ev_to_ebitda 21.0\n        momentum_12_1m 0.22\n        momentum_1m 0.03\n        rsi_14 62.0\n        return_on_equity 1.47\n        debt_to_equity 1.76\n        profit_margins 0.26\n        revenue_growth_yoy 0.05\n        earnings_growth_yoy 0.12\n        pct_from_52w_high -0.03\n        pct_from_52w_low 0.28\n        recommendation_mean 1.8\n        target_upside 0.12\n        analyst_count 45\n      }\n      {\n        ticker \"INTC\"\n        trailing_pe 35.0\n        price_to_book 1.2\n        ev_to_ebitda 18.0\n        momentum_12_1m -0.28\n        momentum_1m -0.06\n        rsi_14 32.0\n        return_on_equity 0.04\n        debt_to_equity 0.68\n        profit_margins 0.02\n        revenue_growth_yoy -0.12\n        earnings_growth_yoy -0.45\n        pct_from_52w_high -0.41\n        pct_from_52w_low 0.05\n        recommendation_mean 3.8\n        target_upside -0.05\n        analyst_count 38\n      }\n    ]\n  }\n}\n",
    "ScoreNewsSentiment.baml": "// ScoreNewsSentiment.baml\n// LLM-based financial news sentiment scoring for Idzorek alpha adjustment.\n// Each news headline is scored in [-1, 1]; scores feed into the\n// exponential-decay signal used to adjust view confidence in issue #13.\n\nclass NewsArticle {\n  title string  @description(\"News headline to score.\")\n}\n\nclass NewsSentimentOutput {\n  // One score per input article, in the same order as articles[].\n  // Each value is in [-1.0, 1.0].\n  scores float[]  @description(\"Sentiment score for each article: +1=strongly bullish, -1=strongly bearish, 0=neutral.\")\n  reasoning string @description(\"Brief overall summary of the sentiment assessment.\")\n}\n\nfunction ScoreNewsSentiment(\n  ticker: string,\n  articles: NewsArticle[]\n) -> NewsSentimentOutput {\n  client CustomSonnet45\n  prompt #\"\n    You are a financial analyst scoring news sentiment for {{ ticker }}.\n\n    Rate each headline below using these guidelines:\n    - +1.0 = Strongly bullish  (earnings beat, major contract win, strong buy upgrade, record revenue)\n    - +0.5 = Moderately bullish (guidance raised, positive product launch, mild analyst upgrade)\n    -  0.0 = Neutral            (routine personnel change, minor announcement, unclear impact)\n    - -0.5 = Moderately bearish (guidance cut, regulatory inquiry, mild analyst downgrade)\n    - -1.0 = Strongly bearish   (earnings miss, lawsuit, mass layoffs, major loss, credit downgrade)\n\n    Rules:\n    - Return exactly one score per headline, in the same order as the input.\n    - Scores must be in [-1.0, 1.0].\n    - Intermediate values (e.g. 0.3, -0.7) are allowed and encouraged for nuance.\n    - Focus on the likely PRICE IMPACT for {{ ticker }}, not general market sentiment.\n\n    Headlines:\n    {{ articles }}\n\n    {{ ctx.output_format }}\n  \"#\n}\n\ntest ScoreNewsSentimentApple {\n  functions [ScoreNewsSentiment]\n  args {\n    ticker \"AAPL\"\n    articles [\n      { title \"Apple reports record Q4 earnings, beats EPS by 15%\" }\n      { title \"Apple faces antitrust probe in EU over App Store policies\" }\n      { title \"Apple names new VP of Engineering\" }\n    ]\n  }\n}\n",
    "SelectCovRegime.baml": "// SelectCovRegime.baml\n// Selects the appropriate covariance estimator based on market conditions and news sentiment.\n\nenum CovEstimatorChoice {\n  EMPIRICAL          @description(\"Standard sample covariance; use in calm, data-rich environments.\")\n  LEDOIT_WOLF        @description(\"Ledoit-Wolf shrinkage; robust default for most regimes.\")\n  OAS                @description(\"Oracle Approximating Shrinkage; works well with small N/T ratio.\")\n  SHRUNK             @description(\"Manual shrinkage; use when you want explicit shrinkage control.\")\n  EW                 @description(\"Exponentially weighted; use in trending or high-volatility regimes.\")\n  GERBER             @description(\"Gerber statistic; robust to outliers and fat tails.\")\n  GRAPHICAL_LASSO_CV @description(\"Sparse precision matrix; use when few factors drive returns.\")\n  DENOISE            @description(\"Random matrix theory denoising; clean covariance in normal regimes.\")\n  DETONE             @description(\"Denoised + market mode removed; for diversified factor models.\")\n  IMPLIED            @description(\"Option-implied covariance; use when options market data is available.\")\n}\n\nclass CovRegimeSelection {\n  estimator CovEstimatorChoice @description(\"Recommended covariance estimator for current conditions.\")\n  confidence float @description(\"Confidence in this selection, in [0.0, 1.0].\")\n  rationale string @description(\"Brief explanation referencing the sentiment and volatility regime.\")\n}\n\nfunction SelectCovRegime(\n  news_headlines: string[],\n  avg_sentiment_score: float,\n  realized_vol_30d: float\n) -> CovRegimeSelection {\n  client CustomSonnet45\n  prompt #\"\n    You are a quantitative risk model specialist. Select the most appropriate covariance\n    estimator for portfolio construction given current market conditions.\n\n    Decision guidelines:\n    - avg_sentiment_score < -0.3 (negative) AND realized_vol_30d > 0.20: use EW (trending vol)\n    - avg_sentiment_score in [-0.3, 0.3] AND realized_vol_30d in [0.10, 0.20]: use LEDOIT_WOLF\n    - avg_sentiment_score > 0.3 (positive) AND realized_vol_30d < 0.10: use DENOISE (stable)\n    - Extreme stress (realized_vol_30d > 0.35): use GERBER (outlier-robust)\n    - When few news topics dominate (concentrated): use GRAPHICAL_LASSO_CV\n    - Default fallback: LEDOIT_WOLF\n\n    Sentiment score: {{ avg_sentiment_score }} (range [-1.0, 1.0])\n    30-day realized volatility (annualised): {{ realized_vol_30d }}\n\n    Recent news headlines:\n    {% for h in news_headlines %}\n    - {{ h }}\n    {% endfor %}\n\n    {{ ctx.output_format }}\n  \"#\n}\n\ntest SelectCovRegimeHighVol {\n  functions [SelectCovRegime]\n  args {\n    news_headlines [\n      \"Fed signals aggressive rate hikes amid persistent inflation\",\n      \"Bank of England warns of recession risk\",\n      \"Tech sector selloff accelerates, Nasdaq down 15% YTD\"\n    ]\n    avg_sentiment_score -0.65\n    realized_vol_30d 0.28\n  }\n}\n\ntest SelectCovRegimeCalm {\n  functions [SelectCovRegime]\n  args {\n    news_headlines [\n      \"S&P 500 hits all-time high on strong earnings season\",\n      \"Fed holds rates, markets cheer soft landing narrative\"\n    ]\n    avg_sentiment_score 0.55\n    realized_vol_30d 0.09\n  }\n}\n",
    "clients.baml": "// Learn more about clients at https://docs.boundaryml.com/docs/snippets/clients/overview\n\n// Using the new OpenAI Responses API for enhanced formatting\nclient<llm> CustomGPT5 {\n  provider openai\n  options {\n    model \"gpt-5.2\"\n    api_key env.OPENAI_API_KEY\n  }\n}\n\nclient<llm> Gemini {\n  provider google-ai\n  options {\n    model \"gemini-3-pro-preview\"\n    api_key env.GOOGLE_API_KEY\n    generationConfig {\n      maxOutputTokens 16000\n    }\n  }\n}\n\n// Claude Opus 4.5 - Most capable model (released Nov 2025)\nclient<llm> CustomOpus45 {\n  provider anthropic\n  options {\n    model \"claude-opus-4-5-20251101\"\n    api_key env.ANTHROPIC_API_KEY\n    max_tokens 16000\n  }\n}\n\n// Claude Sonnet 4.5 - Best coding model and strongest for complex agents (released Sep 2025)\nclient<llm> CustomSonnet45 {\n  provider anthropic\n  options {\n    model \"claude-sonnet-4-5-20250929\"\n    api_key env.ANTHROPIC_API_KEY\n    max_tokens 16000\n  }\n}\n\nclient<llm> AzureOpenAIGpt5 {\n  provider azure-openai\n  options {\n    resource_name env.AZURE_OPENAI_RESOURCE_NAME\n    deployment_id env.AZURE_OPENAI_GPT5_DEPLOYMENT_ID\n    api_version env.AZURE_OPENAI_API_VERSION\n    api_key env.AZURE_OPENAI_KEY\n    max_tokens null\n    }\n}\n\n// Main Ollama client for Briscola\n// Uses OLLAMA_BASE_URL env var in Docker, defaults to localhost\nclient<llm> Ollama {\n  provider \"openai-generic\"\n  retry_policy Constant\n  options {\n    base_url env.OLLAMA_BASE_URL ?? \"http://localhost:11434/v1\"\n    model qwen3:4b\n    // Optimize for speed\n    temperature 0.3\n    max_tokens 100\n  }\n}\n\n// https://docs.boundaryml.com/docs/snippets/clients/fallback\nclient<llm> OpenaiFallback {\n  provider fallback\n  options {\n    // This will try the clients in order until one succeeds\n    strategy [CustomGPT5, AzureOpenAIGpt5]\n  }\n}\n\n// https://docs.boundaryml.com/docs/snippets/clients/retry\nretry_policy Constant {\n  max_retries 3\n  strategy {\n    type constant_delay\n    delay_ms 200\n  }\n}\n\nretry_policy Exponential {\n  max_retries 2\n  strategy {\n    type exponential_backoff\n    delay_ms 300\n    multiplier 1.5\n    max_delay_ms 10000\n  }\n}",
    "generators.baml": "// This helps use auto generate libraries you can use in the language of\n// your choice. You can have multiple generators if you use multiple languages.\n// Just ensure that the output_dir is different for each generator.\ngenerator target {\n    // Valid values: \"python/pydantic\", \"typescript\", \"go\", \"rust\", \"ruby/sorbet\", \"rest/openapi\"\n    output_type \"python/pydantic\"\n\n    // Where the generated code will be saved (relative to baml_src/)\n    output_dir \"../\"\n\n    // The version of the BAML package you have installed (e.g. same version as your baml-py or @boundaryml/baml).\n    // The BAML VSCode extension version should also match this version.\n    version \"0.219.0\"\n\n    // Valid values: \"sync\", \"async\"\n    // This controls what `b.FunctionName()` will be (sync or async).\n    default_client_mode sync\n}\n",
}

def get_baml_files():
    return _file_map