"""add_fred_signal_columns_to_market_indicators

Revision ID: 9bccb9891105
Revises: b2b970954c9c
Create Date: 2025-10-13 15:41:08.107736

"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision: str = '9bccb9891105'
down_revision: Union[str, Sequence[str], None] = 'b2b970954c9c'
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    """Upgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column('market_indicators', sa.Column('ism_signal', sa.String(length=20), nullable=True, comment="ISM signal: 'expansion', 'neutral', 'contraction'"))
    op.add_column('market_indicators', sa.Column('curve_signal', sa.String(length=20), nullable=True, comment="Yield curve signal: 'steep', 'normal', 'flat', 'inverted'"))
    op.add_column('market_indicators', sa.Column('credit_signal', sa.String(length=20), nullable=True, comment="Credit spread signal: 'risk_on', 'neutral', 'elevated', 'distress'"))
    op.alter_column('market_indicators', 'vix_signal',
               existing_type=sa.VARCHAR(length=20),
               comment="VIX regime: 'LOW_VOL', 'MEDIUM_VOL', 'HIGH_VOL', 'elevated'",
               existing_comment="VIX regime: 'LOW_VOL', 'MEDIUM_VOL', 'HIGH_VOL'",
               existing_nullable=True)
    op.alter_column('market_indicators', 'data_quality',
               existing_type=sa.VARCHAR(length=20),
               comment="Data quality: 'complete', 'partial', 'incomplete', 'excellent'",
               existing_comment="Data quality: 'complete', 'partial', 'incomplete'",
               existing_nullable=False)
    # ### end Alembic commands ###


def downgrade() -> None:
    """Downgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.alter_column('market_indicators', 'data_quality',
               existing_type=sa.VARCHAR(length=20),
               comment="Data quality: 'complete', 'partial', 'incomplete'",
               existing_comment="Data quality: 'complete', 'partial', 'incomplete', 'excellent'",
               existing_nullable=False)
    op.alter_column('market_indicators', 'vix_signal',
               existing_type=sa.VARCHAR(length=20),
               comment="VIX regime: 'LOW_VOL', 'MEDIUM_VOL', 'HIGH_VOL'",
               existing_comment="VIX regime: 'LOW_VOL', 'MEDIUM_VOL', 'HIGH_VOL', 'elevated'",
               existing_nullable=True)
    op.drop_column('market_indicators', 'credit_signal')
    op.drop_column('market_indicators', 'curve_signal')
    op.drop_column('market_indicators', 'ism_signal')
    # ### end Alembic commands ###
